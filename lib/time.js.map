{"version":3,"sources":["../src/time.js"],"names":["PARSE","FORMAT_DEFAULT","FORMAT_PARSE","SECONDS","MINUTE","HOUR","DAY","WEEK","MILLISECONDS","MILLISECONDS_MINUTE","MILLISECONDS_HOUR","MILLISECONDS_DAY","MILLISECONDS_WEEK","parseCF","c","Date","NaN","undefined","reg","String","match","appendZero","z","Time","dateObj","init","y","getFullYear","m","getMonth","d","getDate","w","getDay","h","getHours","hm","getMinutes","hms","getSeconds","hmss","getMilliseconds","toString","Math","floor","valueOf","getTime","str","replace","ma","number","units","clone","setFullYear","setMonth","step","indexOf","set","next","add","JSON","stringify","toJSON","s"],"mappings":"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","file":"time.js","sourcesContent":["const PARSE = /^(\\d{4})-?(\\d{2})-?(\\d{1,2})$/\nconst FORMAT_DEFAULT = 'YYYY-MM-DD hh:mm:ss'\nconst FORMAT_PARSE = /Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}/g\nconst SECONDS = 1;\nconst MINUTE = SECONDS * 60;\nconst HOUR = MINUTE * 60;\nconst DAY = HOUR * 24;\nconst WEEK = DAY * 7;\nconst MILLISECONDS = 1000;\nconst MILLISECONDS_MINUTE = MINUTE * MILLISECONDS;\nconst MILLISECONDS_HOUR = HOUR * MILLISECONDS;\nconst MILLISECONDS_DAY = DAY * MILLISECONDS;\nconst MILLISECONDS_WEEK = WEEK * MILLISECONDS;\n\n\nfunction parseCF(c){\n  if (c === null){\n    return new Date(NaN);\n  }\n  if (c === undefined){\n    return new Date();\n  }\n  if (c instanceof Date){\n    return c;\n  }\n  const reg = String(c).match(PARSE)\n  if (reg){\n    return new Date(reg[1], reg[2] - 1, reg[3]);\n  }\n  return new Date(c);\n}\n\nfunction appendZero(z){\n  return z < 10 ? '0' + z : String(z);\n}\n\nclass Time{\n  constructor(c){\n    this.dateObj = parseCF(c);\n    this.init();\n  }\n\n  init(){\n    this.y = this.dateObj.getFullYear();  //年\n    this.m = this.dateObj.getMonth() + 1; //月\n    this.d = this.dateObj.getDate(); // 日\n    this.w = this.dateObj.getDay(); // 星期几\n    this.h = this.dateObj.getHours(); //小时\n    this.hm = this.dateObj.getMinutes(); // 分\n    this.hms = this.dateObj.getSeconds(); // 秒\n    this.hmss = this.dateObj.getMilliseconds(); //毫秒\n  }\n\n  isValid(){\n    return this.dateObj.toString() !== 'Invalid Date';\n  }\n\n  unix(){\n    return Math.floor(this.valueOf() / 1000);\n  }\n\n  valueOf(){\n    return this.dateObj.getTime();\n  }\n\n  clone(){\n    return new Time(this)\n  }\n\n  format(str){\n    str = str || FORMAT_DEFAULT;\n    return str.replace(FORMAT_PARSE, (ma) => {\n      switch(ma){\n        case 'YYYY':\n          return String(this.y);\n        case 'MM':\n          return appendZero(this.m);\n        case 'DD':\n          return appendZero(this.d);\n        case 'hh':\n          return appendZero(this.h);\n        case 'mm':\n          return appendZero(this.hm);\n        case 'ss':\n          return appendZero(this.hms);\n        case 'a':\n          return this.h < 12 ? 'am' : 'pm';\n        case 'A':\n          return this.h < 12 ? 'AM' : 'PM';\n        default:\n          return this.dateObj.toString();\n      }\n    });\n  }\n\n  set(number, units){\n    const d = this.clone();\n    switch(units){\n      case 'Y':\n      case 'year':\n        d.dateObj.setFullYear(number);\n        break;\n      case 'M':\n      case 'month':\n        d.dateObj.setMonth(number);\n        break;\n    }\n    d.init();\n    return d;\n  }\n\n  add(number, units){\n    let step;\n    if (['M', 'month'].indexOf(units) > -1){\n      return this.set(number, units);\n    }\n    if (['Y', 'year'].indexOf(units) > -1){\n      return this.set(number, units);\n    }\n    switch(units){\n      case 'm':\n      case 'minute':\n        step = MILLISECONDS_MINUTE;\n        break\n      case 'h':\n      case 'hour':\n        step = MILLISECONDS_HOUR;\n        break\n      case 'd':\n      case 'day':\n        step = MILLISECONDS_DAY;\n        break\n      case 'w':\n      case 'week':\n        step = MILLISECONDS_WEEK;\n        break\n      default:\n        step = MILLISECONDS\n    }\n    const next = this.valueOf() + (number * step);\n    return new Time(next);\n  }\n\n  subtract(number, units){\n    return this.add(number * -1, units);\n  }\n\n  toJSON(){\n    return {\n      'years': this.y,\n      'months': this.m,\n      'date': this.d,\n      'hours': this.h,\n      'minutes': this.hm,\n      'seconds': this.hms,\n      'milliseconds': this.hmss\n    }\n  }\n\n  toJSONString(){\n    return JSON.stringify(this.toJSON());\n  }\n\n  toDateObj(){\n    return this.dateObj;\n  }\n\n  isLeapYear(){\n    return (0 == this.y%4 && (this.y%100 !=0 || this.y%400 == 0))\n  }\n\n  isBefore(s){\n    return this.valueOf() < s.valueOf();\n  }\n\n  isAfter(s){\n    return this.valueOf() > s.valueOf();\n  }\n\n  isSame(s){\n    return this.valueOf() === s.valueOf();\n  }\n\n  daysInMonth(y, m){\n    return new Date(y !== undefined ? y : this.y, m !== undefined ? m : this.m, 0).getDate();\n  }\n}\n\nexport default Time;"]}